
// Helper to encode SVG string
const encodeSVG = (svgString) => {
    return `data:image/svg+xml;base64,${btoa(svgString)}`;
};

const TEMPLATES = {
    // Airbus A320 (Medium/Large)
    // Original ViewBox: -23 -21 80 80
    A320: (color) => `<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="80mm" height="80mm" viewBox="-23 -21 80 80" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g style="display:inline">
    <path style="fill:${color};stroke:#000000;stroke-width:0.5px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1"
       d="m 17.10525,0.06681738 -0.902035,0.73499118 -0.968852,2.50565184 -0.167044,1.4365737 -0.03341,7.0826419 -0.26727,1.302939 -2.605878,1.236122 0.06682,-0.935443 -0.0167,-1.670435 -0.133635,-0.267269 -1.670435,-0.01671 -0.200452,0.200452 -0.0167,2.238382 0.167043,0.918739 0.233861,0.367496 -9.92238106,5.128234 -0.36749561,0.434313 -0.25056518,0.684878 0.01670434,1.369756 0.13363476,0.0167 0.0668174,-0.701583 4.49346885,-1.403165 0.1837478,0.551244 0.1670434,1e-6 0.066818,-0.584652 3.2239386,-1.119191 0.1837478,0.517835 0.1670433,-1e-6 0.1336344,-0.618061 1.7038432,-0.534539 1.403165,0.0167 0.08352,0.467722 0.167043,0.01671 0.08352,-0.484427 2.655991,0.01671 0.03341,9.153982 0.283974,1.954408 0.434313,2.021224 -0.183748,0.317383 -4.426651,2.856445 -0.26727,0.400904 0.01671,1.035669 5.328686,-1.18601 0.317383,1.152601 0.417609,0.885331 0.267269,0.01669 0.379656,-0.846045 0.30033,-1.204534 5.433805,1.198658 -0.01671,-1.002261 -0.250565,-0.451016 -4.476765,-2.873148 -0.183748,-0.367495 0.3842,-1.987818 0.317383,-1.920999 -0.0167,-9.18739 2.65599,-0.03341 0.15034,0.551243 h 0.150339 l 0.100226,-0.50113 1.286234,-0.05011 1.787365,0.551243 0.06682,0.584652 0.217157,-3e-6 0.11693,-0.467721 3.240644,1.00226 0.100227,0.668174 0.23386,0.0167 0.133635,-0.567947 4.526878,1.38646 0.100224,0.65147 0.150339,-0.0167 -0.06681,-1.503392 -0.317384,-0.651469 -0.400904,-0.3842 -9.822155,-4.994599 c 0.07965,-0.247814 0.334087,-0.367497 0.334087,-0.367497 l 0.03341,-3.006782 -0.267269,-0.300678 -1.570209,0.03341 -0.200452,0.23386 10e-7,1.904296 0.150339,0.734991 -2.622582,-1.386461 -0.334087,-1.336347 0.0167,-7.0826429 -0.283974,-1.2862345 -0.835217,-2.62258215 z" />
  </g>
  <g>
    <path style="fill:${color};stroke:#000000;stroke-width:0.5px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1"
       d="m 17.057019,29.931548 -0.200452,2.3052 0.217158,4.860965 0.150337,-4.844261 z m 1.353053,2.054635 -0.417608,1.603618 -0.116932,2.037929 m -2.104748,-3.541321 0.317384,1.469983 0.133636,2.00452 m 6.447875,-20.880431 -0.03341,-2.321905 0.267269,-0.200451 0.200451,0.167042 0.03341,2.622585 m -12.210875,0.08352 0.01671,-2.772921 0.200453,-0.100227 0.217157,0.133636 0.03341,2.438834 m 10.490321,-0.350793 1.603618,0.785106 m -13.02939,0.06682 1.737252,-0.885331 m 6.815372,-2.689399 0.06682,7.366616 m -3.95893,-7.316501 -0.133636,7.333207 m 2.69627,-17.0834633 -0.07517,0.141987 -0.434311,-0.250565 0.01671,-0.158691 z m 0.509482,0.601356 -0.1921,0.0167 -0.158692,-0.283973 0.06682,-0.116931 z m 0.175396,0.626413 -0.100227,0.0084 -0.11693,-0.325734 0.158692,-0.0167 z m -1.984646,-1.237841 0.07517,0.141987 0.434311,-0.250565 -0.01671,-0.158691 z m -0.509482,0.601356 0.1921,0.0167 0.158692,-0.283973 -0.06682,-0.116931 z m -0.175396,0.626413 0.100227,0.0084 0.11693,-0.325734 -0.158692,-0.0167 z" />
  </g>
</svg>`,

    // Boeing 777 (Large)
    // Original ViewBox: -8 -3 80 80
    B77W: (color) => `<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="80mm" height="80mm" viewBox="-8 -3 80 80" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g>
    <path style="fill:${color};stroke:#000000;stroke-width:0.5px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1"
       d="M 31.070081,0.20045214 29.934188,1.2695302 29.199197,3.0067821 28.285698,6.1572724 27.862847,8.5860336 V 25.991961 l -4.617312,3.183077 0.354353,-0.87407 v -2.834822 l -0.212612,-0.944941 -3.141927,0.02363 -0.188987,0.566964 -0.165365,1.086682 -0.02362,2.055245 0.4016,1.322917 h 0.377976 l 0.307106,1.086683 -19.6547619,13.347285 -1.22842262,2.196986 v 0.87407 l 2.52771572,-1.748139 9.8746278,-3.708893 0.212612,0.448848 0.236235,-0.04725 0.02362,-0.614212 4.630208,-1.606399 0.188988,0.496094 0.259858,-0.02363 v -0.614212 l 3.260045,-1.086681 1.393787,-0.212611 0.212612,0.755951 0.188988,0.02363 0.283482,-0.708705 h 4.464843 l 0.09449,15.473399 0.377978,3.449032 0.720516,3.82701 -0.212611,0.472471 -7.995259,6.529772 -0.267269,0.634764 0.300678,1.703843 9.254207,-3.474503 0.7684,2.77292 0.400905,-0.03341 0.701582,-2.806329 9.287616,3.57473 0.23386,-2.03793 -0.267269,-0.467722 -8.084902,-6.514695 -0.167045,-0.400902 0.902036,-3.908819 0.300678,-3.340868 -0.03341,-15.501633 h 4.710626 l 0.133633,0.618062 0.283975,-0.0167 0.08352,-0.618058 1.720548,0.250563 3.006783,1.102487 0.08352,0.634764 0.217157,0.05012 0.133633,-0.65147 4.593696,1.670433 0.100227,0.551244 0.300678,0.05011 0.100226,-0.484426 10.056016,3.858702 2.338607,1.637027 0.05011,-0.851921 -1.219417,-2.204974 -19.677719,-13.396886 0.250566,-1.052372 0.451017,0.05011 0.367495,-1.419871 -0.05011,-2.27179 -0.217157,-0.935443 -0.400904,-0.417608 -2.772921,-0.01671 -0.233862,0.317382 -0.11693,1.219417 0.08352,2.03793 0.386574,1.043775 L 34.126966,25.774807 34.112336,8.409972 33.828854,6.142115 32.931162,3.0238113 32.127961,1.1811775 Z" />
  </g>
  <g>
    <path style="fill:${color};stroke:#000000;stroke-width:0.5px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1"
       d="m 31.049663,69.52418 c 0,-0.118118 -0.401598,-4.086868 -0.401598,-4.086868 l 0.236234,-9.165921 0.212613,-0.25986 0.212612,0.236236 0.259858,9.21317 z m 0.923835,-2.499564 0.317384,-1.703845 0.03341,-1.436574 0.634767,-2.789623 m -2.839742,5.996857 -0.367496,-1.804069 0.03341,-1.269529 -0.751696,-2.95667 m 10.662336,-31.437094 0.944938,0.566965 m -1.653646,-0.968565 0.755954,0.472471 0.04725,-2.36235 0.425222,-0.18899 0.165365,0.259858 0.259858,2.834823 0.566965,0.4016 m -7.039809,7.843004 -0.04725,-12.780319 m -6.283855,12.780319 0.07087,-12.59133 m -6.40197,4.417597 0.944941,-0.59059 m -1.511906,0.968566 0.590587,-0.377976 0.118118,-2.905694 0.307107,-0.307104 0.401598,0.307104 0.05417,2.335863 0.914398,-0.634968 m 8.857944,-26.3164247 0.250565,-0.11693 m -2.697752,0.016704 0.158692,0.03341 m 1.744493,-0.423235 0.23789,-0.319921 m -1.648822,0.02461 0.196874,0.278905 v 0 m 2.32324,1.02709 -0.329167,-0.04982 -0.176787,-0.383757 -0.277415,-0.43102 -0.27766,-0.135291 -0.510823,-0.01641 -0.01755,-0.615715 0.347906,0.09071 0.369437,0.147357 0.369438,0.352138 0.304744,0.532245 z m -3.375771,0.047361 0.337519,-0.05817 0.168435,-0.442222 0.302472,-0.447724 0.235899,-0.09353 0.510824,-0.01641 -0.0075,-0.624066 -0.32285,0.09907 -0.344382,0.122301 -0.402846,0.377194 -0.262982,0.515541 z" />
  </g>
</svg>`,

    // Cessna 172 (GE)
    // Original ViewBox: 0 0 13 10
    C172: (color) => `<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg viewBox="0 0 13 10" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g>
    <path style="fill:${color};stroke:#000000;stroke-width:0.5px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1"
       d="M 5.4983723,0.44884673 5.5101841,0.46065847 5.2444197,0.52562315 5.179455,0.63192895 5.0436197,1.8131045 5.0318079,2.0670573 2.99428,2.0847749 0.24804687,2.2560454 0.09449457,2.3505405 0.05315342,2.4745639 0.04724755,3.4135986 3.0001866,3.7856689 h 2.0611512 l 0.3248234,2.7816685 -1.4410343,0.2480469 -0.064964,0.094494 0.014764,0.6466935 0.038388,0.056106 L 5.3802543,7.8725362 5.5160894,7.4827484 5.5557008,8.2279022 5.6668992,8.2271849 5.68736,7.902065 5.6814545,7.4768418 5.8409133,7.8902533 7.2996652,7.6303946 7.3232898,7.5831474 7.3410063,6.9453127 7.2642298,6.8212892 5.7995721,6.5791484 6.1362071,3.7974799 8.1678292,3.8033854 11.150293,3.4076915 V 2.5631552 l -0.03543,-0.194894 -0.08859,-0.094494 c 0,0 -2.7668928,-0.1511374 -2.7901941,-0.1440645 -0.019928,0.00605 -2.0762488,-0.068551 -2.0762488,-0.068551 L 6.1421141,1.5532459 6.0476201,0.62602304 5.9767501,0.52562314 5.6696445,0.45475264 5.6873605,0.43112904 5.9354074,0.46065844 6.5968657,0.41341144 5.7227956,0.36616444 5.5928664,0.0531529 5.4334078,0.36616444 H 4.600679 l 0.7382347,0.1063058" />
  </g>
  <g>
    <path style="fill:${color};stroke:#000000;stroke-width:0.5px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1"
       d="m 5.5810546,4.636114 0.017716,2.8643509 M 5.7877603,6.5496185 5.6873605,7.5595238 M 5.3920664,6.5555245 5.4924665,7.5654297 M 5.2034035,3.8419995 5.3704471,3.7835342 5.8882816,3.7918871 6.0469729,3.9088176 6.03862,4.2846654 5.8298156,4.3264261 5.3286852,4.3180732 5.169994,4.2679604 5.1282332,3.9255213 Z M 5.1031774,1.7038432 5.3787992,1.5869128 5.8298165,1.5785609 6.1221426,1.7289 l 0.033409,0.5930043 -1.1191912,0.00835 z" />
  </g>
</svg>`,

    // C130 (Military Transport)
    // Fixed ViewBox: 0 0 45 45
    C130: (color) => `<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg viewBox="0 0 45 45" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g>
    <path style="fill:${color};stroke:#000000;stroke-width:0.5px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1"
       d="m 20.345893,0.20045214 -0.7684,0.36749561 -0.334087,1.40316495 -0.601357,1.2695304 0.0788,-0.2026532 -0.0432,-2.74321797 h -0.367669 l 0.06479,2.84564447 -0.101994,0.036946 0.01181,0.8031993 -0.177176,0.1299292 v 1.4528462 l 0.188989,-0.07087 -0.02362,7.0161829 -0.389788,0.484282 -0.106306,0.342541 0.02362,0.968564 -1.842634,0.01181 0.05906,-1.61821 -0.118118,-0.791388 -0.448846,-0.94494 -0.377977,0.838634 -0.09449,0.212612 -0.03543,0.602399 -0.01181,1.724517 -3.886068,0.106305 0.02362,-1.452846 -0.200799,-1.039434 -0.05906,-0.460659 -0.366165,-0.460658 -0.330729,0.484282 -0.05906,0.507906 -0.165365,0.767763 0.03543,1.700893 -9.76832208,0.507906 -0.17717633,0.366164 0.03543527,1.866258 0.44884671,0.54334 14.32765943,1.511905 3.413598,-0.02362 0.02362,8.315475 0.342541,1.724518 -5.964936,1.547338 -0.01181,1.582778 7.122488,0.968561 0.496094,1.039435 h 0.708704 l 0.484281,-1.027624 7.122489,-1.063056 -0.04725,-1.771763 -6.142114,-1.299295 0.295294,-1.689081 0.05906,-8.327287 3.661644,-0.01181 13.92606,-2.007999 0.330729,-0.614211 -0.09449,-1.807199 -0.484282,-0.366164 -9.024181,-0.2008 -0.0118,-1.81901 -0.118118,-0.578776 -0.236236,-0.590588 -0.271669,-0.519717 -0.271672,0.602399 -0.188989,0.543341 -0.118115,0.578776 0.03543,1.842634 -3.827008,-0.04725 0.02362,-1.783575 -0.106306,-0.708706 -0.141741,-0.413411 -0.354364,-0.507906 -0.283483,0.448846 -0.2008,0.484282 -0.05906,0.649647 0.08268,1.830822 -1.972563,-0.04725 -0.02362,-0.992183 L 22.84984,12.916155 22.525018,12.366908 22.548642,5.126302 22.253348,3.8624441 21.402901,2.031622 21.048549,0.51971726 Z" />
  </g>
</svg>`,

    // Fighter (F16)
    // Original ViewBox: -35 -33 80 80
    F16: (color) => `<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="80mm" height="80mm" viewBox="-35 -33 80 80" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g>
    <path style="fill:${color};stroke:#000000;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1"
       d="m 4.7733824,0.18690005 -0.025056,0.94702855 -0.3661645,1.063058 -0.141741,0.9567522 -0.07087,0.921317 -0.094494,0.082682 -0.035435,0.141741 L 4.0278104,4.9963725 3.9255231,5.6418923 3.7459511,6.4938139 3.5287946,7.2455094 3.3659275,7.9554442 3.3617475,8.2310659 2.990076,8.5442723 2.973373,8.3897572 2.927436,8.3187632 2.873147,8.4273416 l 0.00835,0.2296846 -1.1860085,1.0273172 -0.00835,-0.1419868 -0.045937,-0.07517 -0.050113,0.09605 0.00418,0.2046282 L 0.2839774,10.907937 0.2798014,10.502856 0.212984,10.365045 0.208808,9.8973236 0.10858193,9.7636887 l -0.06264129,0.033409 0.01252825,2.6392863 0.19627606,-0.0042 0.0167044,-0.263093 3.37845385,0.0167 -6.7e-5,1.087641 -1.7067986,1.526669 0.011812,0.87407 0.076776,0.12993 0.1358352,0.04725 1.5650575,-0.003 v -0.168317 l 0.3720703,0.003 v -1.083728 l 0.1003999,0.649646 0.1624116,0.782529 0.3071058,-0.01181 0.00295,0.259859 0.082682,0.07678 0.059059,-0.003 0.062012,-0.07382 0.00295,-0.256906 h 0.2982468 l 0.1653646,-0.688034 0.094494,-0.770718 0.00591,1.136882 0.3868351,-0.0059 0.00886,0.1506 1.5857281,-0.01181 0.1063059,-0.07087 0.056106,-0.124024 -0.00591,-0.853399 -1.7008927,-1.529622 0.00591,-1.086682 3.3929269,0.0089 0.00886,0.256906 0.2037527,-0.0089 V 9.7712751 l -0.1358352,0.1122116 0.011811,0.4813293 -0.082682,0.124023 -0.00886,0.431129 L 7.9611256,9.7476515 7.9404537,9.532087 7.9050183,9.4582635 7.8548184,9.529134 7.8430074,9.6590635 6.6677378,8.6314406 v -0.2008 L 6.6204909,8.3479583 6.5850555,8.4158761 6.5732445,8.5605701 6.2041272,8.2298409 6.2011718,7.9315941 6.0417132,7.252418 5.8143369,6.4876068 5.6223958,5.6194427 5.5485723,5.0642903 5.4924666,4.5120909 5.4865605,4.204985 5.4599842,4.113444 5.3891137,4.0484792 5.3625371,3.7354679 5.3093842,3.1596446 5.1646901,2.1674572 4.8225075,1.1349419 Z" />
  </g>
  <g>
    <path style="fill:${color};stroke:#000000;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1"
       d="m 4.7660435,10.417969 -0.1122116,3.289574 0.02067,0.383882 0.020671,0.442941 0.035435,0.809105 0.053153,-0.153553 0.053153,0.147647 0.029529,-0.3012 0.011811,-0.501999 0.00591,-0.431129 0.035435,-0.395695 z M 4.5769905,7.0742902 c 0.083522,0.041761 0.1921002,0.1336349 0.1921002,0.1336349 L 4.9945992,7.0742901 M 4.4350037,6.0219166 4.7440341,6.2223686 5.1198819,5.9885079 M 4.7607383,3.7584776 4.5156594,3.997231 4.401595,4.401595 4.4350037,6.0219166 4.5769905,7.2663901 4.6688644,7.9512683 4.7690907,9.0454029 4.9110775,7.9512683 4.9945993,7.2246293 5.1198819,5.9885079 5.1400466,4.3962827 5.0373743,3.9943652 Z" />
  </g>
</svg>`,
};

/**
 * Generates a Data URI for the aircraft icon with the specified color.
 * @param {string} type - Aircraft type: 'A320', 'B77W', 'C172', 'C130', 'F16'
 * @param {string} color - Hex color string
 * @returns {string} Data URI
 */
export const getIconUrl = (type, color) => {
    // Map categories to templates
    let template = TEMPLATES[type];
    
    // Fallback logic
    if (!template) {
        if (type === 'Medium') template = TEMPLATES.A320;
        else if (type === 'Large') template = TEMPLATES.B77W;
        else if (type === 'GE') template = TEMPLATES.C172;
        else if (type === 'Fighter') template = TEMPLATES.F16;
        else if (type === 'MilitaryTransport') template = TEMPLATES.C130;
        else template = TEMPLATES.A320; // Default generic
    }

    const svgString = template(color);
    return encodeSVG(svgString);
};

export const DEFAULT_COLORS = {
    myColor: '#eac51c',      // Gold (IFC)
    militaryColor: '#00572c', // Green
    staffColor: '#da1e1e',    // Red
    vaColor: '#7c0eea',       // Purple
    streamerColor: '#9146FF', // Twitch Purple (Creators)
    groundColor: '#00a1f9'    // Blue (Default/Ground)
};
